<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s5 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s6 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s7 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s8 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s9 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s10 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s11 {font-kerning: none; color: #6d7378; background-color: #171818; -webkit-text-stroke: 0px #6d7378}
    span.s12 {font-kerning: none}
    span.s13 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
    span.s14 {font-kerning: none; color: #f67c30; background-color: #171818; -webkit-text-stroke: 0px #f67c30}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"en"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">QR Code Scanner</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">@import</span><span class="s4"> </span><span class="s5">url</span><span class="s8">(</span><span class="s1">'https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">body</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s9">'Inter'</span><span class="s8">,</span><span class="s1"> </span><span class="s5">sans-serif</span><span class="s8">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s4"> #f87171</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* A nice red background */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s1"> </span><span class="s5">flex</span><span class="s8">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">flex-direction:</span><span class="s4"> </span><span class="s5">column</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Arrange content vertically */</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">justify-content:</span><span class="s4"> </span><span class="s5">flex-start</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Align content to the top */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">align-items:</span><span class="s1"> </span><span class="s5">center</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">min-height:</span><span class="s1"> </span><span class="s10">100vh</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin:</span><span class="s1"> </span><span class="s10">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s10">20px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-sizing:</span><span class="s1"> </span><span class="s5">border-box</span><span class="s8">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s4"> #ffffff</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Default text color to white */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.top-button-area</span><span class="s4"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s10">100%</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">max-width:</span><span class="s1"> </span><span class="s10">400px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s10">10px</span><span class="s1"> </span><span class="s10">20px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-sizing:</span><span class="s1"> </span><span class="s5">border-box</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s1"> </span><span class="s5">flex</span><span class="s8">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">justify-content:</span><span class="s4"> </span><span class="s5">center</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">align-items:</span><span class="s1"> </span><span class="s5">center</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">button</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #dc2626</span><span class="s8">;</span><span class="s1"> </span><span class="s11">/* Red button */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> </span><span class="s5">white</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s10">12px</span><span class="s1"> </span><span class="s10">24px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s5">none</span><span class="s8">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s10">8px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-size:</span><span class="s1"> </span><span class="s10">1rem</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-weight:</span><span class="s1"> </span><span class="s10">600</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s5">pointer</span><span class="s8">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s4"> </span><span class="s1">background-color</span><span class="s4"> </span><span class="s10">0.3s</span><span class="s4"> </span><span class="s1">ease</span><span class="s8">,</span><span class="s4"> </span><span class="s1">transform</span><span class="s4"> </span><span class="s10">0.1s</span><span class="s4"> </span><span class="s1">ease</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">4px</span><span class="s1"> </span><span class="s10">10px</span><span class="s1"> </span><span class="s5">rgba(</span><span class="s10">220</span><span class="s8">,</span><span class="s1"> </span><span class="s10">38</span><span class="s8">,</span><span class="s1"> </span><span class="s10">38</span><span class="s8">,</span><span class="s1"> </span><span class="s10">0.3</span><span class="s5">)</span><span class="s8">;</span><span class="s1"> </span><span class="s11">/* Red shadow */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s10">100%</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-top:</span><span class="s1"> </span><span class="s10">10px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">button:hover</span><span class="s4"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s4"> #b91c1c</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Darker red on hover */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">translateY(</span><span class="s10">-2px</span><span class="s5">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">button:active</span><span class="s4"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">translateY(</span><span class="s10">0</span><span class="s5">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.container</span><span class="s4"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s4"> #ffffff</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* White background for the main container */</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s10">16px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">10px</span><span class="s1"> </span><span class="s10">30px</span><span class="s1"> </span><span class="s5">rgba(</span><span class="s10">0</span><span class="s8">,</span><span class="s1"> </span><span class="s10">0</span><span class="s8">,</span><span class="s1"> </span><span class="s10">0</span><span class="s8">,</span><span class="s1"> </span><span class="s10">0.2</span><span class="s5">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s10">24px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s10">100%</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">max-width:</span><span class="s1"> </span><span class="s10">400px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">text-align:</span><span class="s1"> </span><span class="s5">center</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">overflow:</span><span class="s1"> </span><span class="s5">hidden</span><span class="s8">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s4"> #333</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Darker text for content inside the white container */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-top:</span><span class="s1"> </span><span class="s10">20px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">flex-grow:</span><span class="s1"> </span><span class="s10">1</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s1"> </span><span class="s5">flex</span><span class="s8">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">flex-direction:</span><span class="s4"> </span><span class="s5">column</span><span class="s8">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">justify-content:</span><span class="s4"> </span><span class="s5">center</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">align-items:</span><span class="s1"> </span><span class="s5">center</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">h1</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> #dc2626</span><span class="s8">;</span><span class="s1"> </span><span class="s11">/* Red heading */</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">margin-bottom:</span><span class="s4"> </span><span class="s10">20px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">video</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s10">100%</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s5">auto</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">max-height:</span><span class="s1"> </span><span class="s10">300px</span><span class="s8">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s10">12px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #000</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">object-fit:</span><span class="s1"> </span><span class="s5">cover</span><span class="s8">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s4"> </span><span class="s5">none</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Initially hidden, shown when scanning */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin:</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s5">auto</span><span class="s1"> </span><span class="s10">20px</span><span class="s1"> </span><span class="s5">auto</span><span class="s8">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s4"> </span><span class="s10">2px</span><span class="s4"> </span><span class="s5">solid</span><span class="s4"> #dc2626</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Red border for camera window */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">canvas</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s4"> </span><span class="s5">none</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Hidden, used for image processing */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">textarea</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s10">100%</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">min-height:</span><span class="s1"> </span><span class="s10">100px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s10">12px</span><span class="s8">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s10">8px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s10">1px</span><span class="s1"> </span><span class="s5">solid</span><span class="s1"> #e2e8f0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-size:</span><span class="s1"> </span><span class="s10">1rem</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> #333</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">resize:</span><span class="s1"> </span><span class="s5">vertical</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-top:</span><span class="s1"> </span><span class="s10">20px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-sizing:</span><span class="s1"> </span><span class="s5">border-box</span><span class="s8">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s4"> #fef2f2</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Light red/pink background for textarea */</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">border-color:</span><span class="s4"> #dc2626</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Red border for textarea */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.message-box</span><span class="s4"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s4"> #fff3cd</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Default info/pending message */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> #664d03</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s10">12px</span><span class="s8">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s10">8px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-top:</span><span class="s1"> </span><span class="s10">20px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s1"> </span><span class="s5">none</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-size:</span><span class="s1"> </span><span class="s10">0.9rem</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">line-height:</span><span class="s1"> </span><span class="s10">1.4</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s10">1px</span><span class="s1"> </span><span class="s5">solid</span><span class="s1"> #ffeeba</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s10">100%</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.message-box.show</span><span class="s4"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s1"> </span><span class="s5">block</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.message-box.error</span><span class="s4"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #fee2e2</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> #991b1b</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-color:</span><span class="s1"> #fca5a5</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.message-box.success</span><span class="s4"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #d1fae5</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> #065f46</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-color:</span><span class="s1"> #a7f3d0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.loader</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s10">4px</span><span class="s1"> </span><span class="s5">solid</span><span class="s1"> #f3f3f3</span><span class="s8">;</span><span class="s1"> </span><span class="s11">/* Light grey */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-top:</span><span class="s1"> </span><span class="s10">4px</span><span class="s1"> </span><span class="s5">solid</span><span class="s1"> #dc2626</span><span class="s8">;</span><span class="s1"> </span><span class="s11">/* Red */</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s10">50%</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s10">30px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s10">30px</span><span class="s8">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">animation:</span><span class="s4"> </span><span class="s1">spin</span><span class="s4"> </span><span class="s10">1s</span><span class="s4"> </span><span class="s1">linear</span><span class="s4"> </span><span class="s1">infinite</span><span class="s8">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s4"> </span><span class="s5">none</span><span class="s8">;</span><span class="s4"> </span><span class="s1">/* Hidden by default */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin:</span><span class="s1"> </span><span class="s10">10px</span><span class="s1"> </span><span class="s5">auto</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">@keyframes</span><span class="s1"> </span><span class="s5">spin</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">0%</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> </span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">rotate(</span><span class="s10">0deg</span><span class="s5">)</span><span class="s8">;</span><span class="s1"> </span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">100%</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> </span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">rotate(</span><span class="s10">360deg</span><span class="s5">)</span><span class="s8">;</span><span class="s1"> </span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- jsQR library for QR code scanning --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"top-button-area"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"startButton"</span><span class="s3">&gt;</span><span class="s1">Start Scanning</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"container"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">h1</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-2xl font-bold"</span><span class="s3">&gt;</span><span class="s1">QR Code Scanner</span><span class="s3">&lt;/</span><span class="s6">h1</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- Video element for camera feed, initially hidden --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">video</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"video"</span><span class="s4"> </span><span class="s2">autoplay</span><span class="s4"> </span><span class="s2">playsinline</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"rounded-lg shadow-inner"</span><span class="s3">&gt;&lt;/</span><span class="s6">video</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- Canvas for image processing, always hidden --&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s1">canvas</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"canvas"</span><span class="s3">&gt;&lt;/</span><span class="s1">canvas</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- Loading spinner --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"loader"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"loader"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- Message box for user feedback --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"messageBox"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"message-box"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- Textarea to display scanned QR code content --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">textarea</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"output"</span><span class="s4"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"Scanned QR code content will appear here..."</span><span class="s4"> </span><span class="s2">readonly</span><span class="s3">&gt;&lt;/</span><span class="s6">textarea</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">const</span><span class="s1"> video </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'video'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">const</span><span class="s1"> canvas </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'canvas'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">const</span><span class="s1"> context </span><span class="s8">=</span><span class="s1"> canvas</span><span class="s8">.</span><span class="s1">getContext</span><span class="s8">(</span><span class="s9">'2d'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">const</span><span class="s1"> output </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'output'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">const</span><span class="s1"> startButton </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'startButton'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">const</span><span class="s1"> messageBox </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'messageBox'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">const</span><span class="s1"> loader </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'loader'</span><span class="s8">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">let</span><span class="s4"> scanning </span><span class="s8">=</span><span class="s4"> </span><span class="s7">false</span><span class="s8">;</span><span class="s4"> </span><span class="s1">// Flag to control scanning process</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">let</span><span class="s4"> stream </span><span class="s8">=</span><span class="s4"> </span><span class="s7">null</span><span class="s8">;</span><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">// To hold the camera stream</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s7">let</span><span class="s4"> animationFrameId </span><span class="s8">=</span><span class="s4"> </span><span class="s7">null</span><span class="s8">;</span><span class="s4"> </span><span class="s1">// To store the requestAnimationFrame ID</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Function to display messages to the user</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> showMessage</span><span class="s8">(</span><span class="s1">message</span><span class="s8">,</span><span class="s1"> type </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'info'</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageBox</span><span class="s8">.</span><span class="s1">textContent </span><span class="s8">=</span><span class="s1"> message</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageBox</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">remove</span><span class="s8">(</span><span class="s9">'info'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'error'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'success'</span><span class="s8">);</span><span class="s1"> </span><span class="s11">// Remove previous type classes</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageBox</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'show'</span><span class="s8">,</span><span class="s1"> type</span><span class="s8">);</span><span class="s1"> </span><span class="s11">// Add 'show' and new type class</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Function to hide messages</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> hideMessage</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageBox</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">remove</span><span class="s8">(</span><span class="s9">'show'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'info'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'error'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'success'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Function to show the loading spinner</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> showLoader</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>loader</span><span class="s8">.</span><span class="s1">style</span><span class="s8">.</span><span class="s1">display </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'block'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Function to hide the loading spinner</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> hideLoader</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>loader</span><span class="s8">.</span><span class="s1">style</span><span class="s8">.</span><span class="s1">display </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'none'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Function to start the camera and begin scanning</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">async</span><span class="s1"> </span><span class="s7">function</span><span class="s1"> startScanning</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>output</span><span class="s8">.</span><span class="s1">value </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">;</span><span class="s1"> </span><span class="s11">// Clear previous output</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>hideMessage</span><span class="s8">();</span><span class="s4"> </span><span class="s1">// Clear any existing messages</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>showLoader</span><span class="s8">();</span><span class="s4"> </span><span class="s1">// Show loading spinner while camera starts</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Inform the user about camera access request</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span>showMessage</span><span class="s8">(</span><span class="s1">'Getting camera ready...'</span><span class="s8">,</span><span class="s4"> </span><span class="s1">'info'</span><span class="s8">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">try</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Request camera access, specifically the rear camera for better QR scanning</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// playsinline is critical for iOS Safari to play video inline, without going fullscreen</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>video</span><span class="s8">.</span><span class="s1">setAttribute</span><span class="s8">(</span><span class="s9">'playsinline'</span><span class="s8">,</span><span class="s1"> </span><span class="s7">true</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>video</span><span class="s8">.</span><span class="s1">setAttribute</span><span class="s8">(</span><span class="s9">'autoplay'</span><span class="s8">,</span><span class="s1"> </span><span class="s7">true</span><span class="s8">);</span><span class="s1"> </span><span class="s11">// Ensure autoplay is set</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Attempt to get user media</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>stream </span><span class="s8">=</span><span class="s1"> </span><span class="s7">await</span><span class="s1"> navigator</span><span class="s8">.</span><span class="s1">mediaDevices</span><span class="s8">.</span><span class="s1">getUserMedia</span><span class="s8">({</span><span class="s1"> video</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> facingMode</span><span class="s8">:</span><span class="s1"> </span><span class="s9">'environment'</span><span class="s1"> </span><span class="s8">}</span><span class="s1"> </span><span class="s8">});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Set the video source to the camera stream</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>video</span><span class="s8">.</span><span class="s1">srcObject </span><span class="s8">=</span><span class="s1"> stream</span><span class="s8">;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Make the video element visible to show the camera feed</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>video</span><span class="s8">.</span><span class="s1">style</span><span class="s8">.</span><span class="s1">display </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'block'</span><span class="s8">;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Attempt to play the video. This needs a user gesture (handled by button click).</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// It returns a Promise that can be caught if playback fails (e.g., autoplay blocked).</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">await</span><span class="s1"> video</span><span class="s8">.</span><span class="s1">play</span><span class="s8">().</span><span class="s7">catch</span><span class="s8">(</span><span class="s1">playError </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span>console</span><span class="s8">.</span><span class="s4">warn</span><span class="s8">(</span><span class="s1">"Video play failed initially, might need user interaction or metadata:"</span><span class="s8">,</span><span class="s4"> playError</span><span class="s8">);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// No need to throw here, onloadedmetadata will attempt to play again</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Set up event listener for when video metadata is loaded.</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// This is crucial for getting correct video dimensions and starting scanning reliably.</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>video</span><span class="s8">.</span><span class="s1">onloadedmetadata </span><span class="s8">=</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Ensure the video is playing after metadata loads</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">video</span><span class="s8">.</span><span class="s1">paused</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>video</span><span class="s8">.</span><span class="s1">play</span><span class="s8">().</span><span class="s7">catch</span><span class="s8">(</span><span class="s1">e </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                            </span>console</span><span class="s8">.</span><span class="s4">error</span><span class="s8">(</span><span class="s1">"Error playing video after metadata loaded:"</span><span class="s8">,</span><span class="s4"> e</span><span class="s8">);</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                            </span>showMessage</span><span class="s8">(</span><span class="s1">"Could not start video playback. Ensure browser allows autoplay."</span><span class="s8">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>stopScanning</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Set canvas dimensions to match the video stream's dimensions</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>canvas</span><span class="s8">.</span><span class="s1">width </span><span class="s8">=</span><span class="s1"> video</span><span class="s8">.</span><span class="s1">videoWidth</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>canvas</span><span class="s8">.</span><span class="s1">height </span><span class="s8">=</span><span class="s1"> video</span><span class="s8">.</span><span class="s1">videoHeight</span><span class="s8">;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>scanning </span><span class="s8">=</span><span class="s1"> </span><span class="s7">true</span><span class="s8">;</span><span class="s1"> </span><span class="s11">// Set scanning flag to true</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span>hideLoader</span><span class="s8">();</span><span class="s4"> </span><span class="s1">// Hide loader once camera is active</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span>hideMessage</span><span class="s8">();</span><span class="s4"> </span><span class="s1">// Clear any pending messages once camera is active</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Start the continuous scanning loop</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>animationFrameId </span><span class="s8">=</span><span class="s1"> requestAnimationFrame</span><span class="s8">(</span><span class="s1">tick</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>startButton</span><span class="s8">.</span><span class="s1">textContent </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'Stop Scanning'</span><span class="s8">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Update button style to indicate scanning is active</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>startButton</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">remove</span><span class="s8">(</span><span class="s9">'bg-red-600'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'hover:bg-red-700'</span><span class="s8">);</span><span class="s1"> </span><span class="s11">// Ensure it's not trying to remove indigo</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>startButton</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'bg-red-600'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'hover:bg-red-700'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">};</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Fallback for cases where onloadedmetadata might have already fired before the listener was attached</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">video</span><span class="s8">.</span><span class="s1">readyState </span><span class="s8">&gt;=</span><span class="s1"> video</span><span class="s8">.</span><span class="s13">HAVE_METADATA</span><span class="s1"> </span><span class="s8">&amp;&amp;</span><span class="s1"> </span><span class="s8">!</span><span class="s1">video</span><span class="s8">.</span><span class="s1">paused </span><span class="s8">&amp;&amp;</span><span class="s1"> </span><span class="s8">!</span><span class="s1">scanning</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>video</span><span class="s8">.</span><span class="s1">onloadedmetadata</span><span class="s8">();</span><span class="s1"> </span><span class="s11">// Manually trigger the setup logic</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">catch</span><span class="s1"> </span><span class="s8">(</span><span class="s1">err</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>console</span><span class="s8">.</span><span class="s1">error</span><span class="s8">(</span><span class="s9">'Error accessing camera:'</span><span class="s8">,</span><span class="s1"> err</span><span class="s8">);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span>scanning </span><span class="s8">=</span><span class="s4"> </span><span class="s7">false</span><span class="s8">;</span><span class="s4"> </span><span class="s1">// Ensure scanning flag is reset on error</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>hideLoader</span><span class="s8">();</span><span class="s1"> </span><span class="s11">// Hide loader on error</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span>stopStreamingTracks</span><span class="s8">();</span><span class="s4"> </span><span class="s1">// Ensure any obtained tracks are stopped</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Reset button text and style</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>startButton</span><span class="s8">.</span><span class="s1">textContent </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'Start Scanning'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>startButton</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">remove</span><span class="s8">(</span><span class="s9">'bg-red-600'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'hover:bg-red-700'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>startButton</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'bg-red-600'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'hover:bg-red-700'</span><span class="s8">);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span>video</span><span class="s8">.</span><span class="s4">style</span><span class="s8">.</span><span class="s4">display </span><span class="s8">=</span><span class="s4"> </span><span class="s9">'none'</span><span class="s8">;</span><span class="s4"> </span><span class="s1">// Hide video element if camera fails</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Provide user-friendly error messages based on the error type for iPhone</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s7">if</span><span class="s4"> </span><span class="s8">(</span><span class="s4">err</span><span class="s8">.</span><span class="s4">name </span><span class="s8">===</span><span class="s4"> </span><span class="s1">'NotAllowedError'</span><span class="s4"> </span><span class="s8">||</span><span class="s4"> err</span><span class="s8">.</span><span class="s4">name </span><span class="s8">===</span><span class="s4"> </span><span class="s1">'PermissionDeniedError'</span><span class="s8">)</span><span class="s4"> </span><span class="s8">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span>showMessage</span><span class="s8">(</span><span class="s1">'Camera access denied. Please allow camera access in your iPhone settings (Settings &gt; Safari &gt; Camera) and your browser permissions. You might need to refresh the page after granting permission.'</span><span class="s8">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">err</span><span class="s8">.</span><span class="s1">name </span><span class="s8">===</span><span class="s1"> </span><span class="s9">'NotFoundError'</span><span class="s1"> </span><span class="s8">||</span><span class="s1"> err</span><span class="s8">.</span><span class="s1">name </span><span class="s8">===</span><span class="s1"> </span><span class="s9">'DevicesNotFoundError'</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span>showMessage</span><span class="s8">(</span><span class="s1">'No camera found or no suitable camera available on this device.'</span><span class="s8">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">err</span><span class="s8">.</span><span class="s1">name </span><span class="s8">===</span><span class="s1"> </span><span class="s9">'AbortError'</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span>showMessage</span><span class="s8">(</span><span class="s1">'Camera access was cancelled by you.'</span><span class="s8">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">err</span><span class="s8">.</span><span class="s1">name </span><span class="s8">===</span><span class="s1"> </span><span class="s9">'NotReadableError'</span><span class="s1"> </span><span class="s8">||</span><span class="s1"> err</span><span class="s8">.</span><span class="s1">name </span><span class="s8">===</span><span class="s1"> </span><span class="s9">'TrackStartError'</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span>showMessage</span><span class="s8">(</span><span class="s1">'Camera is already in use by another app or not accessible. Please close other apps using the camera and try again.'</span><span class="s8">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">err</span><span class="s8">.</span><span class="s1">name </span><span class="s8">===</span><span class="s1"> </span><span class="s9">'SecurityError'</span><span class="s1"> </span><span class="s8">||</span><span class="s1"> window</span><span class="s8">.</span><span class="s1">location</span><span class="s8">.</span><span class="s1">protocol </span><span class="s8">!==</span><span class="s1"> </span><span class="s9">'https:'</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// This is crucial for iPhone Safari and all modern browsers for camera access</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span>showMessage</span><span class="s8">(</span><span class="s1">'Camera access requires a secure connection (HTTPS). Please ensure you are accessing this page via HTTPS (look for a lock icon in the address bar). If embedded in an iframe, the iframe must have "allow=camera" attribute.'</span><span class="s8">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span>showMessage</span><span class="s8">(</span><span class="s1">`An unexpected error occurred: </span><span class="s8">${</span><span class="s4">err</span><span class="s8">.</span><span class="s4">message</span><span class="s8">}</span><span class="s1">. Please try again.`</span><span class="s8">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Helper function to stop camera tracks</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> stopStreamingTracks</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">stream</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>stream</span><span class="s8">.</span><span class="s1">getTracks</span><span class="s8">().</span><span class="s1">forEach</span><span class="s8">(</span><span class="s1">track </span><span class="s8">=&gt;</span><span class="s1"> track</span><span class="s8">.</span><span class="s1">stop</span><span class="s8">());</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>video</span><span class="s8">.</span><span class="s1">srcObject </span><span class="s8">=</span><span class="s1"> </span><span class="s7">null</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>stream </span><span class="s8">=</span><span class="s1"> </span><span class="s7">null</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Function to stop the camera and scanning</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> stopScanning</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>scanning </span><span class="s8">=</span><span class="s4"> </span><span class="s7">false</span><span class="s8">;</span><span class="s4"> </span><span class="s1">// Stop the scanning loop</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">animationFrameId</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>cancelAnimationFrame</span><span class="s8">(</span><span class="s1">animationFrameId</span><span class="s8">);</span><span class="s1"> </span><span class="s11">// Cancel the animation frame loop</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>animationFrameId </span><span class="s8">=</span><span class="s1"> </span><span class="s7">null</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>stopStreamingTracks</span><span class="s8">();</span><span class="s4"> </span><span class="s1">// Stop all camera tracks and clear stream references</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>video</span><span class="s8">.</span><span class="s4">style</span><span class="s8">.</span><span class="s4">display </span><span class="s8">=</span><span class="s4"> </span><span class="s9">'none'</span><span class="s8">;</span><span class="s4"> </span><span class="s1">// Hide the video element (camera window)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>startButton</span><span class="s8">.</span><span class="s1">textContent </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'Start Scanning'</span><span class="s8">;</span><span class="s1"> </span><span class="s11">// Reset button text</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>startButton</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">remove</span><span class="s8">(</span><span class="s9">'bg-red-600'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'hover:bg-red-700'</span><span class="s8">);</span><span class="s1"> </span><span class="s11">// Ensure class is correct</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>startButton</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'bg-red-600'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'hover:bg-red-700'</span><span class="s8">);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>hideLoader</span><span class="s8">();</span><span class="s4"> </span><span class="s1">// Ensure loader is hidden</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Keep success messages visible, hide others</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(!</span><span class="s1">messageBox</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">contains</span><span class="s8">(</span><span class="s9">'success'</span><span class="s8">))</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>hideMessage</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// The main scanning loop that continuously checks for QR codes</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">function</span><span class="s1"> tick</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">video</span><span class="s8">.</span><span class="s1">readyState </span><span class="s8">===</span><span class="s1"> video</span><span class="s8">.</span><span class="s13">HAVE_ENOUGH_DATA</span><span class="s1"> </span><span class="s8">&amp;&amp;</span><span class="s1"> scanning</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Draw the current video frame onto the hidden canvas</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>context</span><span class="s8">.</span><span class="s1">drawImage</span><span class="s8">(</span><span class="s1">video</span><span class="s8">,</span><span class="s1"> </span><span class="s14">0</span><span class="s8">,</span><span class="s1"> </span><span class="s14">0</span><span class="s8">,</span><span class="s1"> canvas</span><span class="s8">.</span><span class="s1">width</span><span class="s8">,</span><span class="s1"> canvas</span><span class="s8">.</span><span class="s1">height</span><span class="s8">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Get the image data from the canvas</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">const</span><span class="s1"> imageData </span><span class="s8">=</span><span class="s1"> context</span><span class="s8">.</span><span class="s1">getImageData</span><span class="s8">(</span><span class="s14">0</span><span class="s8">,</span><span class="s1"> </span><span class="s14">0</span><span class="s8">,</span><span class="s1"> canvas</span><span class="s8">.</span><span class="s1">width</span><span class="s8">,</span><span class="s1"> canvas</span><span class="s8">.</span><span class="s1">height</span><span class="s8">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Try to find a QR code in the image data using jsQR library</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">const</span><span class="s1"> code </span><span class="s8">=</span><span class="s1"> jsQR</span><span class="s8">(</span><span class="s1">imageData</span><span class="s8">.</span><span class="s1">data</span><span class="s8">,</span><span class="s1"> imageData</span><span class="s8">.</span><span class="s1">width</span><span class="s8">,</span><span class="s1"> imageData</span><span class="s8">.</span><span class="s1">height</span><span class="s8">,</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span>inversionAttempts</span><span class="s8">:</span><span class="s4"> </span><span class="s9">"dontInvert"</span><span class="s8">,</span><span class="s4"> </span><span class="s1">// Optimize for speed, good for typical QR codes</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">code</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s11">// QR code found!</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>console</span><span class="s8">.</span><span class="s1">log</span><span class="s8">(</span><span class="s9">'QR Code detected:'</span><span class="s8">,</span><span class="s1"> code</span><span class="s8">.</span><span class="s1">data</span><span class="s8">);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span>output</span><span class="s8">.</span><span class="s4">value </span><span class="s8">=</span><span class="s4"> code</span><span class="s8">.</span><span class="s4">data</span><span class="s8">;</span><span class="s4"> </span><span class="s1">// Display the scanned data in the textarea</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>stopScanning</span><span class="s8">();</span><span class="s1"> </span><span class="s11">// Stop camera and scanning loop</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span>showMessage</span><span class="s8">(</span><span class="s1">'QR Code scanned successfully!'</span><span class="s8">,</span><span class="s4"> </span><span class="s1">'success'</span><span class="s8">);</span><span class="s4"> </span><span class="s11">// Show success message</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">scanning</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>animationFrameId </span><span class="s8">=</span><span class="s1"> requestAnimationFrame</span><span class="s8">(</span><span class="s1">tick</span><span class="s8">);</span><span class="s1"> </span><span class="s11">// Continue the loop as long as scanning is true</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Event listener for the main "Start Scanning" / "Stop Scanning" button</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>startButton</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s9">'click'</span><span class="s8">,</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">scanning</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span>stopScanning</span><span class="s8">();</span><span class="s4"> </span><span class="s1">// If currently scanning, stop it</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span>startScanning</span><span class="s8">();</span><span class="s4"> </span><span class="s1">// Otherwise, start the scanning process</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">});</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Initial setup for the button text and styling on page load</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>startButton</span><span class="s8">.</span><span class="s1">textContent </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'Start Scanning'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>startButton</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'bg-red-600'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'hover:bg-red-700'</span><span class="s8">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Check if the browser supports camera access (getUserMedia API) on page load</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(!</span><span class="s1">navigator</span><span class="s8">.</span><span class="s1">mediaDevices </span><span class="s8">||</span><span class="s1"> </span><span class="s8">!</span><span class="s1">navigator</span><span class="s8">.</span><span class="s1">mediaDevices</span><span class="s8">.</span><span class="s1">getUserMedia</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span>showMessage</span><span class="s8">(</span><span class="s1">'Your browser does not support camera access. Please use a modern browser like Safari, Chrome, or Firefox.'</span><span class="s8">,</span><span class="s4"> </span><span class="s1">'error'</span><span class="s8">);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span>startButton</span><span class="s8">.</span><span class="s4">disabled </span><span class="s8">=</span><span class="s4"> </span><span class="s7">true</span><span class="s8">;</span><span class="s4"> </span><span class="s1">// Disable the button if camera not supported</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>startButton</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'opacity-50'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'cursor-not-allowed'</span><span class="s8">);</span><span class="s1"> </span><span class="s11">// Visually indicate disabled state</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
</body>
</html>
